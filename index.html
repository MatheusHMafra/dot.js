<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>dot.js</title>
</head>

<body>
    <!--
        Exemplo de uso do doT.js
    -->
    <div id="main"></div>
    <script type="text/javascript" src="doT.min.js"></script>
    <script>
        var data;

        // " ~ " significa que o array será iterado e o item será o valor atual do array e index será o índice atual do array
        // " = " significa que o valor será inserido diretamente na página
        // " it " é o objeto que contém os dados que serão inseridos no template
        // " it.itens " é o array que será iterado
        // " it.titulo " é o valor que será inserido diretamente na página
        // " it.descricao " é o valor que será inserido diretamente na página
        // " item " é o valor atual do array
        // " index " é o índice atual do array
        // " {{~it.itens :item:index}} " é o início do loop
        // " {{~}} " é o fim do loop
        var template = `
                <div>
                <h1>{{=it.titulo}}</h1>
                    <p>{{=it.descricao}}</p>
                    <ul>
                        {{~it.itens :item:index}}
                            <li>{{=item}}</li>
                        {{~}}
                    </ul>
                </div>
                `;
        var renderizado = doT.template(template); // Compila o template

        var xhr = new XMLHttpRequest(); // Cria o pedido HTTP
        xhr.open("GET", "data.json", true); // Configura o pedido HTTP para carregar o arquivo JSON

        xhr.onload = function () { // Quando o pedido for carregado
            if (xhr.status >= 200 && xhr.status < 300) { // Se o status for entre 200 e 299
                // O pedido foi bem-sucedido
                data = JSON.parse(xhr.responseText); // Armazena o arquivo JSON na variável data
                var output = renderizado(data); // Renderiza o template com os dados do arquivo JSON

                document.getElementById("main").innerHTML = output; // Insere o template renderizado na página
            } else {
                // Lidar com erros, se necessário
                console.log("Erro ao carregar o arquivo JSON");
            }
        };

        xhr.send(); // Envia o pedido
    </script>
</body>

</html>